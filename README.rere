![Rerechan02 card name](https://cardivo.vercel.app/api?name=Rerechan02ã€ğ…ğã€&description=Hi,%20everyone!%20and%20Nice%20to%20meet%20you%20%F0%9F%91%8B&image=https://raw.githubusercontent.com/Rerechan02/simple-xray/main/funny1.jpg?v=4&backgroundColor=%23ecf0f1&telegram=/&github=Rerechan02&pattern=leaf&colorPattern=%23eaeaea)

## ç¨‹åºåŒ…ç»“æ„ï¼š 
  
 ``` 
 â”œâ”€â”€ bin 
 â”‚   â””â”€â”€ apibox 
 â”œâ”€â”€ conf 
 â”‚   â”œâ”€â”€ ssl_cert.crt (é»˜è®¤ä¸å­˜åœ¨) 
 â”‚   â”œâ”€â”€ ssl_cert.key (é»˜è®¤ä¸å­˜åœ¨) 
 â”‚   â”œâ”€â”€ config.json 
 â”‚   â””â”€â”€ mime.types 
 â”œâ”€â”€ log 
 â”œâ”€â”€ pkg 
 â”œâ”€â”€ static 
 â”‚   â”œâ”€â”€ images 
 â”‚   â””â”€â”€ scripts 
 â””â”€â”€ template 
  
  
 è¿è¡Œç¯å¢ƒè¦æ±‚ï¼š 
  
 1ã€Linux Kernel 3.x/x86_64 åŠæ›´é«˜ç‰ˆæœ¬ 
 2ã€å»ºè®® Linux å‘è¡Œç‰ˆ CentOS 7.0+ / Ubuntu 14.04+ 
 3ã€å¯ç”¨æ”¯æŒ SSL/TLS æ¨¡å¼è®¿é—®æ—¶ï¼Œéœ€è¦ç”Ÿæˆå¯¹åº”çš„ SSL è¯ä¹¦æ–‡ä»¶ä¸”æ”¾ç½®åˆ° "conf" æ–‡ä»¶å¤¹ä¸‹å¹¶é…ç½® "conf.json" æ–‡ä»¶ 
 4ã€å®¢æˆ·ç«¯è¦æ±‚ä½¿ç”¨ IE9ã€Chrome 40ã€Firefox 38ã€Safari 9 æˆ–æ›´é«˜ç‰ˆæœ¬çš„æµè§ˆå™¨è®¿é—® 
 5ã€æœåŠ¡å™¨ç«¯éœ€è¦å¯¹é˜²ç«å¢™å¼€å¯å¯¹åº”çš„å¤–éƒ¨è®¿é—®ç«¯å£ã€‚å…·ä½“éœ€è¦å¼€æ”¾çš„ç«¯å£è¯·å‚è€ƒ "conf" æ–‡ä»¶å¤¹ä¸‹çš„ "conf.json" æ–‡ä»¶ä¸­çš„ç«¯å£éƒ¨åˆ†çš„é…ç½® 
 6ã€æœ¬ç¨‹åºåªèƒ½å¯¹ Unix/Linux ç±»çš„æ“ä½œç³»ç»Ÿï¼Œä¸”æ”¯æŒ SSH åè®®çš„ OS è¿›è¡Œè¿œç¨‹æ“ä½œ 
 7ã€åŸºäºGo1.6+ï¼ŒåŸç”Ÿæ”¯æŒ http2  
  
  
 ä¸€ã€éƒ¨ç½² 
 1ã€å°†ç¨‹åºè§£å‹æˆ–ä¸‹è½½è‡³ä»»ä¸€ç›®å½•ï¼Œè¿è¡Œ "build.sh" ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶ 
 2ã€ç„¶åè¿è¡Œ "bin" æ–‡ä»¶å¤¹ä¸‹çš„ "apibox" æ–‡ä»¶å³å¯ã€‚å¦‚:"./apibox start/stop" 
 3ã€é…ç½®æ–‡ä»¶åœ¨ "conf" æ–‡ä»¶å¤¹ä¸‹ï¼Œæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸º "conf.json"ï¼Œéƒ¨ç½²çš„æ—¶å€™éœ€è¦æ·»åŠ è·¨åŸŸç™½åå•æ¥æ”¯æŒå…¶ä»–æœºå™¨çš„è®¿é—® 
 4ã€åå°è¿è¡Œå¯ä»¥é…ç½® "conf" æ–‡ä»¶å¤¹ä¸‹çš„ "conf.json" æ–‡ä»¶,å°† "daemon" é¡¹é…ç½®ä¸º "true"  
 5ã€è¿è¡Œæ—¶æ—¥å¿—æ–‡ä»¶å­˜æ”¾åœ¨ "log" æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥å½“å¤©æ—¶æœŸå‘½å 
 6ã€ä¹Ÿå¯ä»¥é…ç½®ç¨‹åºä»¥ Nginx çš„ fcgi æ¨¡å¼è¿è¡Œ,ä»¥ Nginx åšä¸ºè®¿é—®å…¥å£ 
 ```
 
 ### Features 
 * tls1.3 + http2 + quic 
 * autocert(Let's Encrypt) support 
 * plain http2 support 
 * tls termination 
 * sni routing 
 * forward chain 
 * global dns cache 
 * custom dns server support 
 * dns over tls support 
 * hosts file support 
 * flexible auth 
 * outbound ip address support 
 * tls prober mitigation 
 * pac file with china_ip_list 
 * country/region bypass rules 
 * traffic metrics 
 * pprof/expvar handler 
 * graceful reload
 * websocket http + https
 * reverense proxy
 * Supporting reverse-proxy, 7 load-balancing algorithms in goproxy: Random, IP Hash, Round Robin, Weight Round Robin, Power of Two Choices (P2C), Consistent Hashing with Bounded Loads, Least Load 
 * Supporting GET/POST/PUT/DELETE Methods in http and CONNECT method in https in goproxy 
 * Supporting HTTP authentication 
 * Filtering and blocking specific http requests and even rewriting them in goproxy 
 * Customizing responses from third-party API 
 * Cache support with memory or Redis to speed up the responding and the expired time of caches is configurable 
 * Flexible and eager-loading configurations 
  
 
 ### What can it do? 
 - Chained proxies, the program itself can be used as an proxies, and if it is set up, it can be used as a secondary proxies or even an N-level proxies. 
 - Communication encryption, if the program is not a level one proxies, and the upper level proxies is also the program, then the communication between the upper level proxies and the upper level proxies can be encrypted, and the underlying tls high-intensity encryption is used, and the security is featureless. 
 - Smart HTTP, SOCKS5 proxy, will automatically determine whether the visited website is blocked. If it is blocked, it will use the upstream proxies (provided that the upstream proxies is configured) to access the website; if the visited website is not blocked, in order to speed up the access, the proxies will Direct access to the website without using a upstream proxies. 
 - Domain name black and white list, more free to control the way the website is accessed. 
 - Cross-platform, whether you are windows, linux, mac, or even raspberry pie, you can run the proxy very well. 
 - Multi-protocol support, support for HTTP(S), TCP, UDP, Websocket, SOCKS5 proxy. 
 - TCP/UDP port forwarding. 
 - Support intranet penetration, protocol supports TCP and UDP. 
 - SSH relay, HTTP (S), SOCKS5 proxy supports SSH relay, the upper Linux server does not need any server, a local proxy can be happy online. 
 - [KCP](https://github.com/xtaci/kcp-go) protocol support, HTTP(S), SOCKS5, SPS proxy supports KCP protocol to transmit data, reduce latency and improve browsing experience. 
 - Dynamic selection of upstream proxies, through the external API, HTTP (S), SOCKS5, SPS proxies can achieve user-based or IP-based speed limit, connection limit, dynamic access to upstream. 
 - Flexible upstream allocation, HTTP(S), SOCKS5 proxy can implement user- or IP-based speed limit, connection limit, and upper-level through configuration files. 
 - Transparent HTTP (S) proxy, in conjunction with iptables, forwards the outgoing 80, 443 traffic directly to the proxy at the gateway, enabling non-aware intelligent router proxy. 
 - Protocol conversion, which can convert existing HTTP(S) or SOCKS5 or SS proxy into one port and support HTTP(S) and SOCKS5 and SS proxy at the same time. Converted SOCKS5 and SS proxy. If the upstream is SOCKS5 proxy, then UDP is supported. Features while supporting powerful cascading authentication. 
 - Custom underlying encrypted transmission, http(s)\sps\socks proxy can encrypt tcp data via tls standard encryption and kcp protocol on top of tcp, in addition to support custom encryption after tls and kcp, that is Said custom encryption and tls|kcp can be used in combination, the internal AES256 encryption, you only need to define a password when you use it. 
 - Underlying compression efficient transmission, http(s)\sps\socks proxy can encrypt tcp data through custom encryption and tls standard encryption and kcp protocol on tcp, and can also compress data after encryption, that is, compression function And custom encryption and tls|kcp can be used in combination. 
 - Secure DNS proxy, which can secure and prevent pollution DNS queries through encrypted proxy communication between the DNS proxy server provided by the local proxy and the upstream proxy. 
 - Load balancing, high availability, HTTP(S)\SOCKS5\SPS proxies supports upstream load balancing and high availability, and multiple upstream repeat-P parameters can be used. 
 - Specify the egress IP. The HTTP(S)\SOCKS5\SPS\TCP proxy supports the client to connect with the ingress IP, and uses the ingress IP as the egress IP to access the target website. If the ingress IP is an intranet IP, the egress IP does not use the ingress IP. 
 - Support speed limit, HTTP(S)\SOCKS5\SPS\TCP proxy supports speed limit. 
 - SOCKS5 proxies supports cascading certification. 
 - The certificate parameter uses base64 data. By default, the -C, -K parameter is the path of the crt certificate and the key file. If it is the beginning of base64://, then the latter data is considered to be base64 encoded and will be used after decoding. 
 - Support client IP black and white list, more secure control of client access to proxy service, if black and white list is set at the same time, then only whitelist is effective. Socks / HTTP(S) / SPS / TCP / UDP / DNS / intranet NAT The bridge/intranet NAT the tbridge and supports the client IP black and white list. 
 - Range ports listen on, HTTP(S)\SOCKS5\SPS\TCP proxy supports port range listening, avoiding starting too many processes and improving performance. 
  
 ### Why do you need it? 
  
 - When for some reason we are unable to access our services elsewhere, we can establish a secure tunnel to access our services through multiple connected proxy nodes. 
 - WeChat interface is developed locally for easy debugging. 
 - Remote access to intranet machines. 
 - Play LAN games with your friends. 
 - I used to play only on the LAN, and now I can play anywhere. 
 - Replace the sword inside Netnet, show IP internal Netcom, peanut shell and other tools. 
 - .. 
  
  
 The manual on this page applies to the latest version of goproxy. Other versions may not be applicable. Please use the command according to your own instructions.
 
 
 ## ğŸ‰ How to use goproxy 
  
 ### 1.Get source code 
  
 ```
( Coming Soon )
 ``` 
  
 **Besides, you also need a Redis to support caching responses if you enable Redis config in goproxy.** 
  
 ### 2.Compile the source code 
  
 ```powershell 
 cd $GOPATH/src/github.com/( soon )
  
 go build 
 ``` 
  
 ### 3.Run 
  
 goproxy uses cfg.toml as its configurations file which is located in `/etc/proxy/cfg.toml` of your server, you should create a cfg.toml in there previously, here is a typical example: 
  
 ```toml 
 # toml file for goproxy 
  
 title = "TOML config for goproxy" 
  
 [server] 
 port = ":8080" 
 reverse = true 
 proxy_pass = ["127.0.0.1:6000"] 
 # 0 - random, 1 - loop, 2 - power of two choices(p2c), 3 - hash, 4 - consistent hashing, 5 - least load 
 inverse_mode = 2 
 auth = false 
 cache = true 
 cache_timeout = 60 
 cache_type = "redis" 
 log = 1 
 log_path = "./logs" 
 user = { agent = "proxy" } 
 http_read_timeout = 10 
 http_write_timeout = 10 
  
 [redis] 
 redis_host = "localhost:6379" 
 redis_pass = "" 
 max_idle = 5 
 idle_timeout = 10 
 max_active = 10 
  
 [mem] 
 capacity = 1000 
 cache_replacement_policy = "LRU" 
 ``` 
  
 ### Configurationsï¼š 
 #### [server] 
 - **port**ï¼šthe port goroxy will listen to 
 - **reverse**ï¼šenable the reverse-proxy feature or not 
 - **proxy_pass**ï¼šback-end servers that actually provide services, like ["127.0.0.1:80^10","127.0.0.1:88^5","127.0.0.1:8088^2","127.0.0.1:8888"], weight can be assigned to every single server 
 - **inverse_mode**ï¼šload-balancing algoritmsï¼š0 for Randomized Algorithmï¼› 1 for Weight Round Robin Algorithmï¼› 2 for Power of Two Choices (P2C) Algorithmï¼› 3 for IP Hash Algorithm based on hash ringï¼› 4 for Consistent Hashing with Bounded Loads Algorithm 
 - **auth**ï¼šenable http authentication or not 
 - **cache**ï¼šenable responses caching or not 
 - **cache_timeout**ï¼šexpired time of responses caching, in seconds 
 - **cache_type**: redis or memory 
 - **log**ï¼šlog level, 1 for Debugï¼Œ0 for info 
 - **log_path**ï¼šthe path of log files 
 - **user**ï¼šuser name from http authentication 
 - **http_read_timeout**ï¼šduration for waiting response from the back-end server, if goproxy don't get the response after this duration, it will throw an exception 
 - **http_write_timeout**ï¼šduration for back-end server writing response to goproxy, if back-end server takes a longer time than this duration to write its response into goproxy, goproxy will throw an exception 
  
 #### [redis] 
 - **redis_host**ï¼šredis host 
 - **redis_pass**ï¼šredis password 
 - **max_idle**ï¼šthe maximum idle connections of redis connection pool 
 - **idle_timeout**ï¼šduration for idle redis connection to close 
 - **max_active**ï¼šmaximum size of redis connection pool 
  
 #### [mem] 
  
 - **capacity**: cache capacity of items 
 - **cache_replacement_policy**: LRU or LFU 
  
 There should be a binary named `goproxy` as the same of project name after executing the `go build` command and that binary can be run directly to start a goproxy server. 
  
 The running goproxy server listens in the port set in cfg.toml and it will forward your http requests to the back-end servers set in cfg.toml by going through that port in goproxy


```markdown
# éš§é“åè®®å’ŒæœåŠ¡å™¨è®¾ç½®æŒ‡å—

## ç›®å½•
- [ä»‹ç»](#ä»‹ç»)
- [éš§é“åè®®](#éš§é“åè®®)
  - [SSH éš§é“](#ssh-éš§é“)
  - [VPN éš§é“](#vpn-éš§é“)
  - [HTTPS éš§é“](#https-éš§é“)
- [æœåŠ¡å™¨è®¾ç½®](#æœåŠ¡å™¨è®¾ç½®)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [å‚è€ƒæ–‡çŒ®](#å‚è€ƒæ–‡çŒ®)

## ä»‹ç»
æ­¤å­˜å‚¨åº“æä¾›äº†æœ‰å…³å„ç§éš§é“åè®®ä»¥åŠå¦‚ä½•åœ¨Linux VPSï¼ˆè™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨ï¼‰ä¸Šè®¾ç½®éš§é“æœåŠ¡å™¨çš„å…¨é¢æŒ‡å—ã€‚éš§é“åè®®å…è®¸æ‚¨å®‰å…¨åœ°è·¯ç”±ç½‘ç»œæµé‡ï¼Œè®¿é—®è¿œç¨‹æœåŠ¡å™¨æˆ–ä¿æŠ¤æ‚¨çš„äº’è”ç½‘è¿æ¥ã€‚

## éš§é“åè®®
### SSH éš§é“
SSH éš§é“å…è®¸æ‚¨é€šè¿‡SSHè¿æ¥åˆ›å»ºå®‰å…¨é€šé“ï¼Œå¯ç”¨äºç½‘ç»œæµé‡é‡å®šå‘ã€è¿œç¨‹æœåŠ¡å™¨è®¿é—®æˆ–äº’è”ç½‘æµé‡åŠ å¯†ã€‚

#### é…ç½®ç¤ºä¾‹
è¦åˆ›å»ºSSHéš§é“æœåŠ¡å™¨ï¼Œè¯·åœ¨æ‚¨çš„LinuxæœåŠ¡å™¨ä¸Šé…ç½®`/etc/ssh/sshd_config`æ–‡ä»¶ä»¥å…è®¸`AllowTcpForwarding yes`é€‰é¡¹ã€‚ç„¶åï¼Œä½¿ç”¨ä»¥ä¸‹å®¢æˆ·ç«¯å‘½ä»¤ä½œä¸ºç¤ºä¾‹ï¼š

```bash
ssh -L <æœ¬åœ°ç«¯å£>:<ç›®æ ‡>:<ç›®æ ‡ç«¯å£> ç”¨æˆ·@sshæœåŠ¡å™¨
```

### VPN éš§é“
VPN éš§é“å…è®¸åœ¨å…¬å…±ç½‘ç»œä¸Šå»ºç«‹å®‰å…¨çš„ç½‘ç»œè¿æ¥ã€‚é€šå¸¸ç”¨äºè¿œç¨‹è®¿é—®å…¬å¸ç½‘ç»œæˆ–éšè—æ‚¨çš„IPåœ°å€ã€‚

#### é…ç½®ç¤ºä¾‹
è¦ä½¿ç”¨OpenVPNåˆ›å»ºVPNæœåŠ¡å™¨ï¼Œéœ€è¦é…ç½®OpenVPNé…ç½®æ–‡ä»¶å¹¶ç”Ÿæˆæ‰€éœ€çš„å¯†é’¥å’Œè¯ä¹¦ã€‚è¯¦ç»†çš„é…ç½®ç¤ºä¾‹å¯ä»¥åœ¨OpenVPNæ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚

### HTTPS éš§é“
HTTPS éš§é“å…è®¸æ‚¨é€šè¿‡HTTPSåè®®åˆ›å»ºåŠ å¯†è¿æ¥ï¼Œé€šå¸¸ç”¨äºéšè—Webæµé‡ã€‚

#### é…ç½®ç¤ºä¾‹
è¦ä½¿ç”¨Stunnelåˆ›å»ºHTTPSéš§é“æœåŠ¡å™¨ï¼Œéœ€è¦é…ç½®Stunnelé…ç½®æ–‡ä»¶ï¼Œå°†ç‰¹å®šç«¯å£è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨é€šè¿‡HTTPSã€‚

## æœåŠ¡å™¨è®¾ç½®
åœ¨`server-setup`ç›®å½•ä¸­ï¼Œæ‚¨å°†æ‰¾åˆ°æœ‰å…³è®¾ç½®æ¯ç§ä¸Šè¿°åè®®çš„éš§é“æœåŠ¡å™¨çš„è¯¦ç»†è¯´æ˜å’Œè„šæœ¬ã€‚

## ç³»ç»Ÿè¦æ±‚
è¦åœ¨Linux VPSä¸Šè¿è¡Œéš§é“æœåŠ¡å™¨ï¼Œæ‚¨åº”è¯¥æ»¡è¶³ä»¥ä¸‹ç³»ç»Ÿè¦æ±‚ï¼š

| ç³»ç»Ÿ            | æ”¯æŒçš„   | æµ‹è¯•è¿‡çš„ | æœ€ä½      | æ¨è       |
|-----------------|---------|----------|----------|------------|
| è™šæ‹ŸåŒ–          | KVM     | KVM      | KVM      | KVM        |
| CPUæ¶æ„         | amd64   | amd64    | amd64    | amd64      |
| æ“ä½œç³»ç»Ÿ        | Debian 10ã€Ubuntu 20.04 | Debian 10ã€Ubuntu 20.04 | Debian 10 | Debian 10  |
| æ“ä½œç³»ç»Ÿæ¶æ„    | 64ä½     | 64ä½     | 64ä½     | 64ä½       |
| CPU             | -       | 1æ ¸      | 1æ ¸      | 2æ ¸æˆ–æ›´å¤š   |
| å†…å­˜            | -       | 512MB    | 1GB      | 2GBæˆ–æ›´å¤š   |
| å­˜å‚¨            | -       | 20GB     | 15GB     | 20GBæˆ–æ›´å¤š  |
| ç½‘ç»œ            | 1xIPv4ã€ç¦ç”¨IPv6ã€å¼€æ”¾ç«¯å£ | 1xIPv4ã€ç¦ç”¨IPv6ã€å¼€æ”¾ç«¯å£ | 1xIPv4ã€ç¦ç”¨IPv6ã€å¼€æ”¾ç«¯å£ | 1xIPv4ã€ç¦ç”¨IPv6ã€å¼€æ”¾ç«¯å£ |
| ISP             | AWS Lightsailã€DigitalOceanã€Linodeã€ç­‰ç­‰ | AWS Lightsail | - | - |

è¯·ç¡®ä¿æ»¡è¶³ä¸æ‚¨æ‰“ç®—é…ç½®çš„éš§é“åè®®ç›¸å¯¹åº”çš„ç³»ç»Ÿè¦æ±‚ã€‚åŒæ—¶ï¼Œç¡®ä¿æ‚¨å…·æœ‰ç®¡ç†å‘˜ï¼ˆrootï¼‰æƒé™ä»¥é…ç½®éš§é“æœåŠ¡å™¨ã€‚

## ä½¿ç”¨æ–¹æ³•
æ‚¨å¯ä»¥åœ¨æ­¤å­˜å‚¨åº“ä¸­å„ä¸ªåè®®ç›®å½•ä¸­æ‰¾åˆ°è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹ã€‚

## æ•…éšœæ’é™¤
å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜æˆ–é”™è¯¯ï¼Œè¯·å‚è€ƒå„éš§é“åè®®æ–‡æ¡£ä¸­çš„æ•…éšœæ’é™¤éƒ¨åˆ†ã€‚

## å‚è€ƒæ–‡çŒ®
- [OpenSSHæ–‡æ¡£](https://www.openssh.com/)
- [OpenVPNæ–‡æ¡£](https://openvpn.net/index.php/open-source.html)
- [Stunnelæ–‡æ¡£](https://www.stunnel.org/)
```

## Contact

- [Rerechan02](mailto:widyabakti02@gmail.com)
- [![Email](https://img.shields.io/badge/Email-widyabakti02%40gmail.com-blue?style=flat-square)](mailto:widyabakti02@gmail.com)
- License: [Creative Commons](https://mirrors.creativecommons.org/presskit/icons/cc.svg)